@layer pages {
  /* ===== Tournament Config UI ===== */
  .tournament-page .config-spacer {
    display: block;
    min-height: 1px;
  }

  .tournament-page .config-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-md) var(--space-lg);
    background: var(--bg-surface);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    margin-bottom: var(--space-xl);
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .tournament-page .config-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-sm);
    padding: var(--space-sm) 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    position: relative;
    /* Ensure content fits in column */
    min-width: 0;
  }

  /* Full width items */
  .tournament-page .config-row-spacer,
  .tournament-page .config-warning {
    grid-column: 1 / -1;
  }

  /* Remove borders in grid mode to avoid visual clutter, 
     or keep them if it looks okay. Let's make them subtler or remove 
     intermediate borders since grid provides structure. 
     Actually, let's keep them but maybe adjust padding. */

  .tournament-page .config-row:last-child {
    border-bottom: none;
  }

  /* Intermediate: 2 columns but stack labels to prevent overlap */
  @media (max-width: 700px) {
    .tournament-page .config-row {
      flex-direction: column;
      align-items: flex-start; /* Force Left Align */
      gap: 6px; /* Tighter gap */
    }

    .tournament-page .ui-select-wrapper,
    .tournament-page .ui-toggle,
    .tournament-page .config-label {
      width: 80%;
      text-align: left;
    }

    .tournament-page .ui-stepper {
      width: 100%;
      max-width: 120px; /* Wider stepper */
    }

    /* Ensure label container (with ? icon) is also flex-start */
    /* Ensure label container (with ? icon) is now flex-start with proper gap */
    .tournament-page .config-label-container {
      display: flex;
      align-items: center;
      width: 100%;
      margin-bottom: 0; /* Gap handles spacing */
      gap: 6px; /* Restore gap between text and icon */
    }

    /* Reverting margin-left: auto - icon stays next to label */
    .tournament-page .config-help {
      margin-left: 0;
    }

    .tournament-page .ui-trigger {
      justify-content: space-between;
      width: 100%;
      box-sizing: border-box;
    }

    /* Specific fix for 'Prioritize Pattern' toggle row to match others */
    .tournament-page .config-row.toggle-row {
      align-items: flex-start;
    }
  }

  /* Mobile: 1 column, back to side-by-side labels if desired, or keep stacked */
  @media (max-width: 450px) {
    .tournament-page .config-grid {
      grid-template-columns: 1fr;
    }
    .tournament-page .config-spacer {
      display: none;
    }
  }

  .tournament-page .config-row-spacer {
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent,
      var(--border-color),
      transparent
    );
    margin: var(--space-sm) 0;
  }

  .tournament-page .config-label-container {
    display: flex;
    align-items: center;
    width: 100%;
    gap: 4px;
  }

  /* Help icon styles - specific size and alignment */
  .tournament-page .config-help {
    /* Reverted: margin-left: auto; */
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-muted);
    font-size: 0.75rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    flex-shrink: 0;
  }

  .tournament-page .config-help:hover {
    border-color: var(--accent);
    color: var(--accent);
  }

  .tournament-page .config-warning {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-sm);
    background: rgba(245, 158, 11, 0.1);
    border: 1px solid rgba(245, 158, 11, 0.3);
    border-radius: var(--radius-md);
    font-size: 0.85rem;
    color: var(--warning);
  }

  .tournament-page .warning-icon {
    font-weight: bold;
  }

  /* Custom Select */
  .tournament-page .ui-select-wrapper {
    position: relative;
    min-width: 140px;
  }

  .tournament-page .ui-trigger {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-sm);
    padding: var(--space-sm) var(--space-md);
    background: var(--input-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    color: var(--text-primary);
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.2s;
  }

  .tournament-page .ui-trigger:hover {
    border-color: var(--accent);
  }

  .tournament-page .ui-arrow {
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 5px solid var(--text-muted);
    transition: transform 0.2s;
  }

  .tournament-page .ui-select-wrapper.open .ui-arrow {
    transform: rotate(180deg);
  }

  .tournament-page .ui-options {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: 4px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg);
    z-index: 100;
    /* max-height: 200px; - Removed to show full list */
    /* overflow-y: auto; - Removed */
  }

  .tournament-page .ui-select-wrapper.open .ui-options {
    display: block;
  }

  .tournament-page .ui-option {
    padding: var(--space-sm) var(--space-md);
    cursor: pointer;
    transition: background 0.15s;
    color: var(--text-secondary);
  }

  .tournament-page .ui-option:hover {
    background: var(--bg-card-hover);
    color: var(--text-primary);
  }

  .tournament-page .ui-option.selected {
    background: rgba(59, 130, 246, 0.15);
    color: var(--accent);
    font-weight: 600;
  }

  /* Custom Stepper */
  .tournament-page .ui-stepper {
    display: flex;
    align-items: center;
    gap: 2px;
    background: var(--input-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    overflow: hidden;
  }

  .tournament-page .stepper-btn {
    width: 60px;
    height: 36px;
    background: transparent;
    border: none;
    color: var(--text-primary);
    font-size: 1.25rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .tournament-page .stepper-btn:hover:not(:disabled) {
    background: var(--accent);
    color: white;
  }

  .tournament-page .stepper-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }

  .tournament-page .stepper-input {
    width: 80px;
    text-align: center;
    background: transparent;
    border: none;
    color: var(--text-primary);
    font-size: 1rem;
    font-weight: 600;
    -moz-appearance: textfield;
    appearance: textfield;
    height: 40px;
    padding: 0;
  }

  .tournament-page .stepper-input::-webkit-outer-spin-button,
  .tournament-page .stepper-input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  /* Custom Toggle */
  .tournament-page .ui-toggle {
    width: 44px;
    height: 24px;
    cursor: pointer;
    flex-shrink: 0;
  }

  .tournament-page .ui-toggle.disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  .tournament-page .toggle-track {
    width: 100%;
    height: 100%;
    background: var(--bg-tertiary);
    border-radius: 12px;
    position: relative;
    transition: background 0.2s;
    border: 1px solid var(--border-color);
  }

  .tournament-page .ui-toggle.active .toggle-track {
    background: var(--accent);
    border-color: var(--accent);
  }

  .tournament-page .toggle-thumb {
    position: absolute;
    top: 2px;
    left: 2px;
    width: 18px;
    height: 18px;
    background: white;
    border-radius: 50%;
    transition: transform 0.2s;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  }

  .tournament-page .ui-toggle.active .toggle-thumb {
    transform: translateX(20px);
  }

  /* Side toggle for player list (A/B) */
  .tournament-page .side-toggle .toggle-thumb {
    animation: toggle-pop 0.15s ease-out;
  }

  @keyframes toggle-pop {
    0% {
      transform: scale(0.8);
    }
    50% {
      transform: scale(1.1);
    }
    100% {
      transform: scale(1);
    }
  }

  /* Pairs Section */
  .tournament-page .config-pairs-section {
    padding: var(--space-xl) var(--space-lg);
    background: rgba(255, 255, 255, 0.03);
    border-radius: var(--radius-lg);
    border-top: 1px solid var(--border-color);
    margin: var(--space-lg) auto;
    max-width: 600px;
    display: flex;
    flex-direction: column;
    align-items: center; /* Center items vertically */
    text-align: center;
  }

  .tournament-page .config-pairs-header {
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: var(--space-md);
    margin-bottom: var(--space-md);
  }

  .tournament-page .config-pairs-label {
    font-weight: 700;
    font-size: 0.85rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .tournament-page .config-pairs-bullet-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    width: 100%;
  }

  .tournament-page .config-pairs-bullet-list li {
    position: relative;
    padding-left: 20px;
    font-weight: 500;
    color: var(--text-primary);
    font-size: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .tournament-page .config-pairs-bullet-list li::before {
    content: "â€¢";
    position: absolute;
    left: 0;
    color: var(--accent);
    font-size: 1.25rem;
  }

  .tournament-page .config-pairs-empty {
    display: flex;
    justify-content: center;
    padding: var(--space-lg) 0;
  }

}
